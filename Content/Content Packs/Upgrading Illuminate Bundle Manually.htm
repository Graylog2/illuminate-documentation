<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head>
    </head>
    <body>
        <MadCap:snippetBlock src="../Resources/Snippets/IlluminateBanner.flsnp" />
        <p>The following article describes how to upgrade an existing Illuminate instance using an externally provided bundle obtained from <a href="https://go2.graylog.org/contact-sales">your sales representative</a>. For information on how to upgrade Illuminate via the Graylog interface, which is the preferred method of installation, see <a href="../Drafts/Upgrading Graylog Illuminate.htm">the related documentation</a>.</p>
        <p>It is recommended that you use this article for upgrading Illuminate if your Graylog server cannot access the public internet or if you are operating Graylog with a free Operations license.</p>
        <p>
            <section class="infoBox">
                <div class="title" style="font-weight: normal;"><b>Hint</b>:&#160;If your Graylog server cannot access the public internet, then you may also wish to turn off notifications for new Illuminate versions as this may generate error messages. Adjust the following setting in your <code class="linecode">server.conf</code> file to turn off Illuminate version notifications:&#160;<code class="linecode">illuminate_hub_new_version_check_interval=0s</code>.</div>
            </section>
        </p>
        <h2>Prerequisites</h2>
        <p>The following is required prior to installing Graylog Illuminate:</p>
        <ul>
            <li>
                <p>A Graylog server running at least version 5.0.0.</p>
            </li>
            <li>
                <p>A valid Operations or Security license.</p>
            </li>
            <li>
                <p>Administrator access to the Graylog server.</p>
            </li>
        </ul>
        <h2>Download the Illuminate Bundle</h2>
        <p>Once you have <a href="https://go2.graylog.org/contact-sales">obtained the Illuminate bundle</a>, download the file to a system that can be used to access the Graylog server web interface where Illuminate will be installed.</p>
        <h2>Illuminate Installation With The Graylog Web Interface</h2>
        <ol>
            <li>
                <p>Log into your Graylog web interface using an account that has administrative privileges.</p>
            </li>
            <li>
                <p>Click on the <i>Enterprise</i> menu and select <i>Illuminate</i>.</p>
            </li>
        </ol>
        <p>
            <img src="../Resources/Images/Installing Graylog Illuminate/navigate_to_illuminate.gif" />
        </p>
        <h2>Upgrading An Existing Illuminate Deployment</h2>
        <p>When navigating to the <i>Illuminate</i> page, you will see a list of the current Illuminate packs and their activation status. To upgrade this installation of Illuminate, locate the link titled <i>Install Another Bundle</i> in the upper right corner of the <i>Illuminate</i> page.</p>
        <p>
            <img src="../Resources/Images/Upgrading Graylog Illuminate/install_another_bundle.png" />
        </p>
        <p>This will take you to the bundle upload page.</p>
        <p>
            <img src="../Resources/Images/Installing Graylog Illuminate/bundle_upload_dialog.png" />
        </p>
        <h2>Upload the Illuminate Bundle</h2>
        <p>Upload the bundle using one of two methods:</p>
        <ul>
            <li>
                <p>Manual</p>
                <ul>
                    <li>
                        <p>You can click on the box to open a file browser window on your local system, browse to the directory where the Illuminate bundle zip file was downloaded, select the Illuminate bundle zip file, and then click <i>Open</i>.</p>
                    </li>
                </ul>
            </li>
            <li>
                <p>Drag and Drop</p>
                <ul>
                    <li>
                        <p>You can drag and drop the bundle zip file from a file explorer window on your operating system to the <i>drag &amp; drop</i> section of the installer page.</p>
                    </li>
                </ul>
            </li>
        </ul>
        <p>After the bundle has uploaded, you will see a message informing you that the bundle was uploaded successfully but that the previous version is still active until you activate the upgraded bundle.</p>
        <p>
            <img src="../Resources/Images/Upgrading Graylog Illuminate/upgrade_bundle_uploaded.png" />
        </p>
        <p>Click on the <i>Continue to Packs Manager</i> link. This will return you to the <i>Illuminate Processing Packs</i> page.</p>
        <h2>Activating the New Illuminate Bundle</h2>
        <p>Activating the upgraded bundle will disable the active (currently running) version of Illuminate then enable the upgraded version. Message processing will be temporarily paused for this activity ensuring that Illuminate will not skip any messages during the Illuminate upgrade process. All currently enabled packs will be automatically enabled in the upgraded version of Illuminate.</p>
        <p>1. To activate the upgraded version of Illuminate, click on the Illuminate version selection drop-down.</p>
        <p>2. Then select the version that was just uploaded at the bottom of the drop-down list.</p>
        <p>3. Here, select the <i>Activate</i> button to the right of the version selection drop-down, and then click on the <i>Confirm</i> button on the confirmation dialog that appears.</p>
        <p>
            <img src="../Resources/Images/Upgrading Graylog Illuminate/activate_upgraded_bundle.gif" />
        </p>
        <p>4. After the upgraded version of Illuminate has been activated, you will be returned to the <i>Illuminate Processing Packs</i> page. If you want to enable any additional Illuminate packs, that can be done on this page as well.</p>
        <h2>Core Extension Packs Updates Notice</h2>
        <h3>About the Anomaly Detection Add-on Pack</h3>
        <p>Upon upgrading please note that active anomaly detectors from an older version of the Anomaly Detection Add-on Pack will need to be reenabled once the new version of the pack has been enabled.</p>
        <h3>About the Geolocation and Autonomous System (AS) Packs</h3>
        <p>Two technology packs support geolocation and ASN enrichment: one supporting MaxMind city and AS databases and another supporting IPinfo city and AS databases.</p>
        <p>
            <section class="warningBox">
                <div class="title" style="font-weight: normal;"><b>Warning</b>:&#160;We recommend that you activate only one of these packs. As they both provide similar functionality, enabling both will increase the computational cost of processing messages with no benefit.</div>
            </section>
        </p>
        <h3>Illuminate Geolocation and AS Deprecation Notice</h3>
        <p>The Graylog Illuminate Geolocation and AS enrichment processing packs are deprecated and will be removed from a future version of Graylog Illuminate. The functionality of these packs is replaced by the Geolocation Processor. Instead of using the Illuminate Geolocation Processor packs, please instead configure the Geolocation Processor, making sure to verify the <i>Enforce default Graylog schema</i> option is selected.</p>
        <h2>Spotlight Updates Notice</h2>
        <p>As of Graylog Illuminate 3.3.0, all Spotlight content is now contained in the Illuminate bundle. Any Spotlight content packs that were previously installed will now be detected and upgraded automatically when the new bundle is activated. There are two Spotlight packs to note when upgrading from a version prior to Graylog Illuminate 3.3.0, which did not contain Spotlight pack entries:</p>
        <h3>"Message Summary Updates rev. 2" (Security Customers Only)</h3>
        <p>This pack updates an existing content pack that is installed in Graylog by default. All customers with a Security license should enable this Spotlight pack the first time they install Graylog Illuminate 3.3.0 or greater. Any future upgrades to this Spotlight pack will be automatic after it has been enabled initially.</p>
        <h3>"Event Definitions Rollup"</h3>
        <p>This Spotlight pack contains a collection of previously released event definitions. Those who have previously installed the Illuminate event definitions Spotlights do not need to install this. This Spotlight pack contains a set of event definitions developed by Graylog. After enabling the "Event Definitions Rollup" Spotlight pack:</p>
        <ol>
            <li>
                <p>Events are installed and on the system but are disabled by default. Review the installed event definitions by navigating to the <i>Alert</i>s page, then selecting <i>Event Definitions</i>.</p>
            </li>
            <li>
                <p>Review the list of event definitions and identify the events that are applicable to your alerting requirements.</p>
                <p>
                    <section class="infoBox">
                        <div class="title" style="font-weight: normal;"><b>Hint</b>:&#160;Graylog recommends that you make a copy of the event definitions provided in the events content packs, then use the copy instead of modifying and enabling the event definitions installed by the content pack. Making a copy of the event definition will prevent the loss of the event definition configuration if the events content pack is ever uninstalled.</div>
                    </section>
                </p>
            </li>
            <li>
                <p>To make a copy of an event definition, select the <i>More</i> button associated with the event definition to be copied, then select <i>Duplicate</i> and <i>Confirm</i>. A copy of the event definition will be made, identifiable by the fact that a new event definition will appear with the same name but having the prefix <code class="linecode">COPY-</code> inserted in the event definition name.</p>
            </li>
        </ol>
        <p>
            <img src="../Resources/Images/duplicate_event_definitions.gif">
            </img>
        </p>
        <p>Event definitions can be enabled by clicking on the <i>More</i> button to the right of the event definition to enable, then select <i>Enable</i>.</p>
        <p>&#160;</p>
    </body>
</html>