<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head> <title>GitLab Content Pack</title></head>
    <body>
        <p>GitLab is a complete DevOps platform that provides Git-based source code management, CI/CD automation, security scanning, and project collaboration in a single application, available as both cloud-hosted and self-managed solutions.</p>
        <p> This pack parses GitLab logs.</p>
        <h3>Requirement(s)</h3>
        <ul>
            <li>
                <p>A Graylog server with a valid Enterprise license that is running Graylog version <b>6.1.3 </b>
            </li>
            <li>
                <p>This pack is tested with GitLab version 17.9.</p>
            </li>
            <li>
                <p>This pack requies the use of the Raw HTTP input.</p>
            </li>
        </ul>
        <h2><a name="Graylog"></a>Graylog Server Configuration</h2>
        <ol>
            <li>
                <p>Create a new Raw HTTP input for receiving Gitlab logs, unless one already exists. This input must be used for Gitlab logs only.</p>
            </li>
            <li>
                <p>Once created (or if the Raw HTTP input has already been created), click <i>Show received messages</i> to obtain the input ID (this will pull up a search window with the <i>All Time</i> timeframe). If there are a large number of logs, then you may want to adjust the timeframe to speed up the process.</p>
            </li>
            <li>
                <p>Copy the <code class="linecode">gl2_source_input</code> value.</p>
            </li>
            <li>
                <p>Navigate to <i>Enterprise</i> &gt;<i>Illuminate</i> and select the <i>Customization</i> tab.</p>
            </li>
            <li>
                <p>Locate the <code class="linecode">lookup_adapter_input_routing</code> title and click <i>Edit</i> on the right. For the <code class="linecode">content_name</code> key, enter the <code class="linecode">gl2_source_input</code> ID copied earlier. For the <code class="linecode">input_id</code> value, enter <code class="linecode">gitlab</code>. (Note that the column names are reversed; this will be corrected in a future release).</p>
            </li>
            <li>
                <p>Select <i>Configure value</i> to confirm.</p>
            </li>
            <li>
                <p>If receiving Cloudflare logs on multiple inputs, repeat this process for each input.</p>
            </li>
        </ol>
        <h3>What is Provided</h3>
        <p>This pack includes parsing rules that convert GitLab logs into Graylog schema-compatible fields.</p>
        <h3>Setting up the Raw HTTP input</h3>
        <h4>Graylog Server Settings</h4>
        <ol>
            <li>
                <p>Create a global Raw HTTP input in Graylog.</p>
            </li>

            <li>
                <p>Configure the log source to the desired value and configure the field <code class="linecode">event_source_product</code> with the value <code class="linecode">GitLab-web</code>.</p>
            </li>
      
        <h3>Log Format Examples:</h3>
        <MadCap:codeSnippet>
            <MadCap:codeSnippetCopyButton>&#160;</MadCap:codeSnippetCopyButton>
            <MadCap:codeSnippetBody MadCap:useLineNumbers="False" MadCap:lineNumberStart="1" MadCap:continue="False" xml:space="preserve">Access Logs version 1.18
127.0.0.1 - - [04/Mar/2023:19:25:07 -0600] "GET / HTTP/1.1" 200 3543 "-" "Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:109.0) Gecko/20100101 Firefox/109.0"

Access Logs version 1.24
127.0.0.1 - - [13/Sep/2023:08:34:54 -0500] "GET / HTTP/1.1" 200 615 "-" "Mozilla/5.0 (X11; Linux x86_64; rv:103.0) Gecko/20100101 Firefox/103.0" "-"

Error Logs:
2023/03/05 09:34:46 [emerg] 2032#2032: no "ssl_certificate" is defined for the "listen ... ssl" directive in /etc/GitLab/sites-enabled/default:21

2023/01/05 11:50:44 [error] 22053#0: *3 open() "/usr/local/stefan/GitLab/1.10.2_1/html/stest" failed</MadCap:codeSnippetBody>
        </MadCap:codeSnippet>
        <p>
            <section class="infoBox">
                <div class="title"><b>Hint:  </b><span style="font-weight: normal;">These are default fields or values found in the combined log format. Logs with custom fields, formats or ordering may be problematic.</span>
                </div>
            </section>
        </p>
        <h3>GitLab Spotlight Content Pack</h3>
        <p>The GitLab content pack provides an Overview Dashboard, a Web Overview Dashboard and a User Overview Dashboard.</p>
    </body>
</html>
