<?xml version="1.0" encoding="utf-8"?>
<html lang="en" xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <!--12,"Name":"OIDC","Icon":null,"Languages":[{"Code":"en",--><title>OIDC</title>
        <!--openid-connect",-->
    </head>
    <body>
        <p>
            <MadCap:snippetText src="../Resources/Snippets/OperationsFeatureBanner.flsnp" />
        </p>
        <p>Graylog 4.2 introduces generic OpenID Connect (OIDC) authentication on-premise, ensuring that your Graylog login
 can be managed with a variety of OIDC-compliant identity providers.</p>
        <h2>Identity Providers and Graylog</h2>
        <p>
    These providers have been tested successfully with Graylog; however, you are encouraged to explore authentication
 with any OIDC-compliant provider that best fits your needs and environment.</p>
        <ul>
            <li><a href="https://auth0.com/docs/get-started">Auth0</a>
            </li>
            <li><a href="https://docs.microsoft.com/en-us/azure/active-directory/develop/v2-protocols-oidc">Azure AD</a>
            </li>
            <li><a href="https://developers.google.com/identity/gsi/web/guides/overview">Google</a>
            </li>
            <li><a href="https://www.keycloak.org/guides#getting-started">Keycloak</a>
            </li>
            <li><a href="https://docs.pingidentity.com/category/getstarted">Ping</a>
            </li>
            <li><a href="https://community.oktopost.com/knowledgebase/articles/1867237-how-to-set-up-single-sign-on-with-onelogin">OneLogin</a>
            </li>
        </ul>
        <h2>Google <code data-backticks="1" class="linecode">hd</code> Claim Authentication Parameter</h2>
        <section class="warningBox">
            <div class="title"><b>Warning: </b><span style="font-weight: normal;">If you use OIDC with Google, you can restrict access to only members of your G Suite domain
 by adding an </span><span style="font-weight: normal;">hd claim that matches your G Suite domain name. You
        must set this parameter to restrict access; otherwise, anyone with an authenticated Google
 account can access your Graylog instance.</span>
            </div>
            <div class="content">
                <p>We <strong>strongly</strong> recommend restricted access as a best practice for all, but it is especially
 necessary for self-managed, publicly available Graylog instances.</p>
            </div>
        </section>
        <h3>Configuration</h3>
        <ol>
            <li>To set this authentication parameter, navigate to the "Authentication" page and select <em>Edit</em> next to
 your Google authentication service.
    </li>
        </ol>
        <p>
            <img src="../Resources/Images/OIDC/OIDC.png" alt="OIDC_Edit" class="fr-fic fr-dii fr-draggable" />
        </p>
        <ol start="2">
            <li>In the "Claims" menu, add the <code data-backticks="1" class="linecode">hd&#160;</code>claim under "Name" and provide your
 organization's domain name in the "Value" field.
    </li>
            <li>Select <em>Add</em>.</li>
        </ol>
        <section class="infoBox">
            <div class="title"><b>Hint:</b> <span style="font-weight: normal;">Generic OIDC support was first introduced in Graylog Operations 4.2. Support for custom OIDC
 claims was added in Graylog 4.2.12 and 4.3.5.</span></div>
        </section>
        <p>For more information regarding the <code data-backticks="1"><code class="linecode">hd</code>&#160;</code>claim in Google Identity,
    <a href="https://developers.google.com/identity/protocols/oauth2/openid-connect#hd-param">see related Google
 documentation</a><span style="color: rgb(0, 0, 0);">.</span></p>
        <h2>Configuration</h2>
        <p>To begin, obtain
 authentication credentials from your provider to configure your OIDC protocol. Navigation of each provider’s
 application is different. In this example, we will look at how to set up an OIDC service with Auth0.</p>
        <h3>
    Auth0</h3>
        <ol>
            <li>Log into your existing Auth0 dashboard; here, you will need to
        <a href="https://auth0.com/docs/get-started/create-apps">create an application</a> for Graylog.
    </li>
        </ol>
        <section class="infoBox">
            <div class="title"><b>Hint:</b> <span style="font-weight: normal;">If you have multiple Graylog instances, you will need to create separate applications in
 Auth0 for each Graylog instance.</span></div>
        </section>
        <ol start="2">
            <li>Once the Graylog application has been created, select this application in Auth0 to view your client credentials.
 These credentials will be required to configure your OIDC service in Graylog.
</li>
        </ol>
        <p>
            <img src="../Resources/Images/OIDC/OIDC_Image_1 (1).jpg" /><![CDATA[    ]]></p>
        <ol start="3">
            <li>Then, in your Graylog application, navigate to the <em>Authentication</em> page and select <em>Create
 Service</em>.
</li>
        </ol>
        <p>
            <img src="../Resources/Images/OIDC/OIDC_Image_3.jpg" /><![CDATA[    ]]></p>
        <ol start="4">
            <li>
                <p>Now you can use the credentials from Auth0 to fill in the following fields and make your selections,
 including:</p>
                <ul>
                    <li>Title
                <ul><li>The title of the login screen when your users sign into Graylog via your SSO protocol.</li></ul></li>
                    <li>Description
                <ul><li>Provides a general description of the identity provider selected (optional).</li></ul></li>
                    <li>OIDC Base URL
                <ul><li>The base URL of your OIDC environment from the credentials provided by Auth0.</li></ul></li>
                    <li>Callback URL
                <ul><li>The callback URL is generated by Graylog beneath this field.</li></ul></li>
                    <li>Client ID and Client Secret
                <ul><li>Both of these values are provided in the Auth0 application.</li></ul></li>
                    <li>Token Verified Connect Timeout
                <ul><li>We recommend the default value of “10” for this field.</li></ul></li>
                    <li>Default Role
                <ul><li>The default role will populate as Reader; this is the basic level of access needed for most
 Graylog users and is therefore the recommended selection.
                    </li></ul></li>
                </ul>
            </li>
            <li>
                <p>Select “Server Connection Check." Click <em>Apply</em>. The Server Connection Check allows Graylog to perform
 a basic consistency and connectivity check of the configuration. Any errors detected at this point are noted by
 the application before proceeding.</p>
            </li>
        </ol>
        <h3>Group Synchronization</h3>
        <p>Currently, Group Sync is only available with
    <a href="https://go2docs.graylog.org/5-0/setting_up_graylog/on-prem_okta_authentication.html">Okta authentication</a>.</p>
        <h3>
    Activation</h3>
        <p>Once you have configured the service, activate your current service provider to enable the
 authentication protocol. Only one authentication service can be activated at a time for each Graylog instance. If
 you change service providers or need to update your settings, be sure to activate the new service from this
 menu.</p>
        <p>
            <img src="../Resources/Images/OIDC/Activation.png" alt="OIDC_Image_2" class="fr-fic fr-dii fr-draggable" />
        </p>
        <section class="infoBox">
            <div class="title"><b>Hint:</b> <span style="font-weight: normal;">If you have any issues with your identity provider, remember that you can select Login
 with default method to log into Graylog with your default admin credentials.</span></div>
        </section>
        <!--OriginalURI: :/openid-connect"}],-->
    </body>
</html>